---
description: 現在のセッションから汎用知識のみを抽出し、話題ごとに自動タイトルで分割・保存（Obsidian直下、引数不要）
allowed-tools: Bash(date:*)
---

## 前提
- 今日: !`date +%F`
- base_dir: $HOME/Dropbox/obsidian/知識メモ

## あなたの役割
プロジェクト固有情報を除去し、**汎用化できる知識だけ**を抽出。内容を**話題（トピック）単位**に整理して、各トピックを**別Markdownファイル**として保存する。

### 抽出と一般化ルール
- 固有名（社名/内部URL/具体リポ/秘密値/環境依存パス/顧客名）は書かない。必要なら `<REDACTED>` や `<PROJECT_ROOT>` 等のプレースホルダに置換。
- ライブラリ名や公開仕様名は可。設定値は原則サンプル値に一般化。
- 同じ判断基準で語れないものは**別トピック**に分割（目安: 最大5–8トピック）。

### タイトル生成（自動）
- 形式: **「主題: 成果/指針」**（40字前後）
- 具体語優先。プロジェクト名や社内語は入れない。

### ファイル名
- 保存先: `$HOME/Dropbox/obsidian/知識メモ/<YYYY-MM-DD>-<slug>.md`
    - 日付は　`date +%F` で取得する
- `<slug>` はタイトルを自動生成する。具体語優先。プロジェクト名や社内語は入れない。ファイル名に使えない文字は`-`に置換する。

## 出力仕様（各ファイルの本文）
- 以下のセクションを**必ずこの順で**書く（テクニカル知識の既定構成）

1. 背景
   - 何の文脈で必要になる知識かを1–2文
2. 要点
   - 再利用に必要なポイントを3–7項
3. 詳細
   - 知識の詳細を書く
   - 図やサンプルコードがある方がわかりやすい場合、積極的に利用する
4. 落とし穴 / アンチパターン
   - よくある誤りと対策
5. 判断基準
   - いつ使うか / 使わないか

## 実行フロー
ultrathinkで実行する。

1) このセッションから**トピック候補**を抽出し、各トピックの**タイトル**・**本文**・**保存予定パス**を作成。この時Web検索などで一次情報を参照し**必ず正当性の再チェックをすること**
2) **プレビューを表示**（本文全文＋保存予定ファイル一覧）。このターンでは `Edit` を使わない
3) ユーザーが **「保存して」** と発話した場合のみ、次を実行
   - 各ファイルを `Edit` で作成/上書き保存
   - **保存したパス一覧**を箇条書きで出力
4) 「修正: …」は修正後に**再プレビュー**。「中止」は何もしない
