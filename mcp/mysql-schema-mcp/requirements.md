# MySQL Schema MCP Server 要件定義

## 環境変数設定
- **DB_HOST**: データベースのホスト名
- **DB_PORT**: データベースのポート番号
- **DB_USER**: データベースのユーザー名
- **DB_PASSWORD**: データベースのパスワード
- **DB_NAME**: 接続するデータベース名

## MCPサーバーの機能

1. **テーブル一覧を出力**
- `list_tables`
- 機能: 指定されたデータベースの全テーブル名をリストとして返す

2. **テーブル詳細を出力**
- `describe_table`
- inputs: tableName
- 機能: 指定されたテーブルのカラム情報、インデックス、外部キー制約などの詳細情報を返す。

## 実装の流れ

1. **環境変数の読み込み**
- サーバー起動時に環境変数を読み込み、データベース接続情報を設定する。

2. **データベース接続**
- 環境変数で設定された情報を使ってMySQLデータベースに接続する。

3. **APIエンドポイントの実装**
- `/tables`エンドポイントで、`SHOW TABLES`クエリを実行し、テーブル一覧を取得して返す。
- `/table/{tableName}`エンドポイントで、`SHOW COLUMNS FROM {tableName}`や`SHOW INDEX FROM {tableName}`などのクエリを実行し、テーブルの詳細情報を取得して返す。

4. **エラーハンドリング**
- データベース接続エラーやクエリエラーに対する適切なエラーハンドリングを実装する。

5. **セキュリティ**
- SQLインジェクション対策として、クエリパラメーターのバリデーションを行う。

## 進捗状況

- [x] 環境変数の読み込み（DB_HOST, DB_PORT, DB_USER, DB_PASSWORD, DB_NAME）
- [x] データベース接続の実装
- [x] 接続テスト（Ping）の実装
- [ ] テーブル一覧機能（list_tables）の実装
- [ ] テーブル詳細機能（describe_table）の実装
- [ ] エラーハンドリングの強化
- [ ] パラメーターバリデーションの実装

## 次のステップ

1. **テーブル一覧機能の実装**
   - listTablesHandlerの実装
   - `SHOW TABLES`クエリの実行
   - 結果を整形して返す処理

2. **テーブル詳細機能の実装**
   - `describe_table`ツールの追加
   - 入力パラメーター（tableName）の受け取り
   - テーブル詳細情報の取得（カラム、インデックス、外部キー制約）

3. **エラーハンドリングとセキュリティ**
   - クエリエラー処理
   - パラメーターバリデーション
   - SQLインジェクション対策
